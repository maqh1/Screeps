{"version":3,"file":"main.js","sources":["../src/config.js","../src/role/harvester.js","../src/role/builder.js","../src/role/upgrader.js","../src/main.js"],"sourcesContent":["const config = {\r\n    maxHarvesters: 2,\r\n    maxBuilders: 2,\r\n    maxUpgraders: 2\r\n};\r\n\r\nexport {config};","var roleHarvester = {\r\n    run: function(creep, spawn_name) {\r\n        // Â¶ÇÊûúCreepÊúâÁ©∫‰ΩôÂÆπÈáè\r\n        if(creep.store.getFreeCapacity() > 0) {\r\n            // ÊâæÂà∞ÊúÄËøëÁöÑËÉΩÈáèÊ∫ê\r\n            var source = creep.pos.findClosestByPath(FIND_SOURCES_ACTIVE);\r\n            if(source) {\r\n                // Â∞ùËØïÊî∂ÈõÜËµÑÊ∫êÔºåÂ¶ÇÊûú‰∏çÂú®ËåÉÂõ¥ÂÜÖÂàôÁßªÂä®Âà∞ËØ•ËµÑÊ∫êÁÇπ\r\n                if(creep.harvest(source) == ERR_NOT_IN_RANGE) {\r\n                    creep.moveTo(source, {visualizePathStyle: {stroke: '#ffaa00'}});\r\n                }\r\n            }\r\n        } else {\r\n            // Â¶ÇÊûúCreepÊª°ËΩΩËÉΩÈáè\r\n            var spawn = Game.spawns[spawn_name];\r\n            if(spawn) {\r\n                // Â∞ùËØïÂ∞ÜËÉΩÈáè‰º†ËæìÂà∞SpawnÔºåÂ¶ÇÊûú‰∏çÂú®ËåÉÂõ¥ÂÜÖÂàôÁßªÂä®Âà∞Spawn\r\n                if(creep.transfer(spawn, RESOURCE_ENERGY) == ERR_NOT_IN_RANGE) {\r\n                    creep.moveTo(spawn, {visualizePathStyle: {stroke: '#ffffff'}});\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nexport { roleHarvester };","var roleBuilder = {\r\n    run: function(creep) {\r\n        // Â¶ÇÊûúCreepÂú®Âª∫ÈÄ†Âπ∂‰∏îËÉΩÈáèËÄóÂ∞ΩÔºåÂàôÂàáÊç¢Âà∞Êî∂ÈõÜÊ®°Âºè\r\n        if(creep.memory.building && creep.store[RESOURCE_ENERGY] == 0) {\r\n            creep.memory.building = false;\r\n            creep.say('üîÑ harvest');\r\n        }\r\n        // Â¶ÇÊûúCreep‰∏çÂú®Âª∫ÈÄ†Âπ∂‰∏îËÉΩÈáèÂ∑≤Êª°ÔºåÂàôÂàáÊç¢Âà∞Âª∫ÈÄ†Ê®°Âºè\r\n        if(!creep.memory.building && creep.store[RESOURCE_ENERGY] == creep.store.getCapacity()) {\r\n            creep.memory.building = true;\r\n            creep.say('üöß build');\r\n        }\r\n        // Â¶ÇÊûúCreepÂú®Âª∫ÈÄ†Ê®°Âºè\r\n        if(creep.memory.building) {\r\n            // ÊâæÂà∞ÊúÄËøëÁöÑÂ∑•Âú∞\r\n            var target = creep.pos.findClosestByPath(FIND_CONSTRUCTION_SITES);\r\n            if(target) {\r\n                // Â∞ùËØïÂª∫ÈÄ†ÔºåÂ¶ÇÊûú‰∏çÂú®ËåÉÂõ¥ÂÜÖÂàôÁßªÂä®Âà∞ËØ•Â∑•Âú∞\r\n                if(creep.build(target) == ERR_NOT_IN_RANGE) {\r\n                    creep.moveTo(target, {visualizePathStyle: {stroke: '#ffffff'}});\r\n                }\r\n            }\r\n        }\r\n        // Âê¶ÂàôÔºåËøõÂÖ•Êî∂ÈõÜÊ®°Âºè\r\n        else {\r\n            // ÊâæÂà∞ÊúÄËøëÁöÑËÉΩÈáèÁÇπ\r\n            var source = creep.pos.findClosestByPath(FIND_SOURCES);\r\n            if(source) {\r\n                // Â∞ùËØïÊî∂ÈõÜËµÑÊ∫êÔºåÂ¶ÇÊûú‰∏çÂú®ËåÉÂõ¥ÂÜÖÂàôÁßªÂä®Âà∞ËØ•ËµÑÊ∫êÁÇπ\r\n                if(creep.harvest(source) == ERR_NOT_IN_RANGE) {\r\n                    creep.moveTo(source, {visualizePathStyle: {stroke: '#ffaa00'}});\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nexport { roleBuilder };","var roleUpgrader = {\r\n    /** @param {Creep} creep **/\r\n    run: function(creep) {\r\n\r\n        // Â¶ÇÊûúCreepÂú®ÂçáÁ∫ßÂπ∂‰∏îËÉΩÈáèËÄóÂ∞ΩÔºåÂàôÂàáÊç¢Âà∞ÈááÈõÜÊ®°Âºè\r\n        if(creep.memory.upgrading && creep.store[RESOURCE_ENERGY] == 0) {  \r\n            creep.memory.upgrading = false; \r\n            creep.say('üîÑ harvest');\r\n\t    }\r\n        // Â¶ÇÊûúCreep‰∏çÂú®ÂçáÁ∫ßÂπ∂‰∏îËÉΩÈáèÂ∑≤Êª°ÔºåÂàôÂàáÊç¢Âà∞ÂçáÁ∫ßÊ®°Âºè\r\n\t    if(!creep.memory.upgrading && creep.store.getFreeCapacity() == 0) {  \r\n\t        creep.memory.upgrading = true;\r\n\t        creep.say('‚ö° upgrade');\r\n\t    }\r\n\r\n        // Â¶ÇÊûúCreepÂú®ÂçáÁ∫ßÊ®°Âºè\r\n\t    if(creep.memory.upgrading) { \r\n            // Â∞ùËØïÂçáÁ∫ßÊéßÂà∂Âô®ÔºåÂ¶ÇÊûú‰∏çÂú®ËåÉÂõ¥ÂÜÖÂàôÁßªÂä®Âà∞ÊéßÂà∂Âô®\r\n            if(creep.upgradeController(creep.room.controller) == ERR_NOT_IN_RANGE) {\r\n                creep.moveTo(creep.room.controller, {visualizePathStyle: {stroke: '#ffffff'}});\r\n            }\r\n        } else {  // Âê¶ÂàôËøõÂÖ•ÈááÈõÜÊ®°Âºè\r\n            // ÊâæÂà∞ÊúÄËøëÁöÑËÉΩÈáèÊ∫ê\r\n            var source = creep.pos.findClosestByPath(FIND_SOURCES_ACTIVE);\r\n            if(source) {\r\n                // Â∞ùËØïÊî∂ÈõÜËµÑÊ∫êÔºåÂ¶ÇÊûú‰∏çÂú®ËåÉÂõ¥ÂÜÖÂàôÁßªÂä®Âà∞ËØ•ËµÑÊ∫êÁÇπ\r\n                if(creep.harvest(source) == ERR_NOT_IN_RANGE) {\r\n                    creep.moveTo(source, {visualizePathStyle: {stroke: '#ffaa00'}});\r\n                }\r\n            }\r\n        }\r\n\t}\r\n};\r\n\r\nexport { roleUpgrader };","import { config } from './config';\r\nimport { roleHarvester } from './role/harvester';\r\nimport { roleBuilder } from './role/builder';\r\nimport { roleUpgrader } from './role/upgrader';\r\n\r\nexport const loop  = function () {\r\n    // Ê∏ÖÈô§Â∑≤Ê≠ª‰∫°ÁöÑCreepÂÜÖÂ≠ò\r\n    for (var name in Memory.creeps) {\r\n        if (!Game.creeps[name]) {\r\n            delete Memory.creeps[name];\r\n        }\r\n    }\r\n\r\n    // ËÆ°Êï∞ÊØèÁßçËßíËâ≤ÁöÑCreepÊï∞Èáè\r\n    var harvesters = _.filter(Game.creeps, (creep) => creep.memory.role == 'harvester');\r\n    var builders = _.filter(Game.creeps, (creep) => creep.memory.role == 'builder');\r\n    var upgraders = _.filter(Game.creeps, (creep) => creep.memory.role == 'upgrader');\r\n\r\n    // Á°ÆÂÆöÂèØÁî®ÁöÑËÉΩÈáè\r\n    var energyAvailable = Game.spawns['maqh'].room.energyAvailable;\r\n\r\n    // ‰øùËØÅÊØèÁßçËßíËâ≤ÁöÑÊï∞Èáè‰∏çÂ∞è‰∫éÈÖçÁΩÆ‰∏≠ÁöÑÊúÄÂ§ßÊï∞Èáè\r\n    if (harvesters.length < config.maxHarvesters && energyAvailable >= 200) {\r\n        var newName = 'Harvester' + Game.time;\r\n        console.log('Spawning new harvester: ' + newName);\r\n        Game.spawns['maqh'].spawnCreep([WORK, CARRY, MOVE], newName, { memory: { role: 'harvester' } });\r\n    } else if (builders.length < config.maxBuilders && energyAvailable >= 200) {\r\n        var newName = 'Builder' + Game.time;\r\n        console.log('Spawning new builder: ' + newName);\r\n        Game.spawns['maqh'].spawnCreep([WORK, CARRY, MOVE], newName, { memory: { role: 'builder' } });\r\n    } else if (upgraders.length < config.maxUpgraders && energyAvailable >= 200) {\r\n        var newName = 'Upgrader' + Game.time;\r\n        console.log('Spawning new upgrader: ' + newName);\r\n        Game.spawns['maqh'].spawnCreep([WORK, CARRY, MOVE], newName, { memory: { role: 'upgrader' } });\r\n    }\r\n\r\n    // ÊâßË°åÊØè‰∏™CreepÁöÑËßíËâ≤‰ªªÂä°\r\n    for (var name in Game.creeps) {\r\n        var creep = Game.creeps[name];\r\n        if (creep.memory.role == 'harvester') {\r\n            roleHarvester.run(creep, 'maqh');\r\n        }\r\n        if (creep.memory.role == 'builder') {\r\n            roleBuilder.run(creep);\r\n        }\r\n        if (creep.memory.role == 'upgrader') {\r\n            roleUpgrader.run(creep);\r\n        }\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}